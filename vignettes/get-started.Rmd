---
title: "Getting started with vroom"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{get-started}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

The vroom package contains one function `vroom()` which is used to
read all types of delimited files. A delimited file is any file in
which the data is separated (delimited) by one or more characters.

The most common type of delimited files are CSV (Comma Separated
Values) files, typically these files have a `.csv` suffix.

## reading files
To read a CSV, or other type of delimited file with vroom pass the file to
`vroom()`. The delimiter will be automatically guessed if it is a common
delimiter. If the guessing fails or you are using a less common delimiter
specify it with `delim = ","`.

We have included an example CSV file in the vroom package. Access it with
`vroom_example("mtcars.csv")`

```{r setup}
library(vroom)

# See where the example file is stored on your machine
file <- vroom_example("mtcars.csv")
file

# Read the file, by default vroom will guess the delimiter automatically.
vroom(file)

# You can also specify it explicitly, which is (slightly) faster, and safer if
# you know how the file is delimited.
vroom(file, delim = ",")
```

## reading multiple files

If you are reading a set of (CSV or otherwise delimited) files which all have
the same columns, you can pass all the filenames directly to `vroom()` and it
will combine them into one result.

First we will create some files to read by splitting the mtcars dataset by
number of cylinders, (it is OK if you don't currently understand this code).
```{r}
mt <- tibble::rownames_to_column(mtcars, "model")
purrr::iwalk(
  split(mt, mt$cyl),
  ~ readr::write_csv(.x, glue::glue("mtcars_{.y}.csv"))
)
```

We can then efficiently read them into one result by passing the filenames directly
to vroom.

```{r}
files <- fs::dir_ls(glob = "mtcars*csv")
files
vroom(files)
```

Often the filename or directory the files are in contains information about
the contents, in this case the `id` parameter can be used to add an extra
column (in this case named `path`) to the result that contains the file path.

```{r}
vroom(files, id = "path")
```

```{r, include = FALSE}
fs::file_delete(files)
```

## reading compressed files

vroom supports reading zip, gz, bz2 and xz compressed files automatically,
just pass the filename of the compressed file to vroom.

```{r}
file <- vroom_example("mtcars.csv.gz")

vroom(file)
```

## reading remote files

vroom can read files from the internet as well by passing the URL of the file
to vroom.

```{r, eval = as.logical(Sys.getenv("NOT_CRAN", "false"))}
file <- "https://raw.githubusercontent.com/jimhester/vroom/master/inst/extdata/mtcars.csv"
vroom(file)
```

It can even read gzipped files from the internet (although currently not the other
compressed formats).

```{r, eval = as.logical(Sys.getenv("NOT_CRAN", "false"))}
file <- "https://raw.githubusercontent.com/jimhester/vroom/master/inst/extdata/mtcars.csv.gz"
vroom(file)
```
