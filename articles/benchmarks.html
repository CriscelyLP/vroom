<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vroom Benchmarks • vroom</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Vroom Benchmarks">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">vroom</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../articles/vroom.html">Get started</a>
</li>
<li>
  <a href="../articles/benchmarks.html">Benchmarks</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Release notes</li>
    <li class="divider">
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/r-lib/vroom">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Vroom Benchmarks</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-lib/vroom/blob/master/vignettes/benchmarks.Rmd"><code>vignettes/benchmarks.Rmd</code></a></small>
      <div class="hidden name"><code>benchmarks.Rmd</code></div>

    </div>

    
    
<p>vroom is a new approach to reading delimited and fixed width data into R.</p>
<p>It stems from the observation that when parsing files reading data from disk and finding the delimiters is generally not the main bottle neck. Instead (re)-allocating memory and parsing the values into R data types (particularly for characters) takes the bulk of the time.</p>
<p>Therefore you can obtain very rapid input by first performing a fast indexing step and then using the Altrep framework available in R versions 3.5+ to access the values in a lazy / delayed fashion.</p>
<div id="how-it-works" class="section level2">
<h2 class="hasAnchor">
<a href="#how-it-works" class="anchor"></a>How it works</h2>
<p>The initial reading of the file simply records the locations of each individual record, the actual values are not read into R. Altrep vectors are created for each column in the data which hold a pointer to the index and the memory mapped file. When these vectors are indexed the value is read from the memory mapping.</p>
<p>This means initial reading is extremely fast, in the real world dataset below it is ~ 1/4 the time of the multi-threaded <code>data.table::fread()</code>. Sampling operations are likewise extremely fast, as only the data actually included in the sample is read. This means things like the tibble print method, calling <code><a href="https://www.rdocumentation.org/packages/utils/topics/head">head()</a></code>, <code><a href="https://www.rdocumentation.org/packages/utils/topics/head">tail()</a></code> <code>x[sample(), ]</code> etc. have very low overhead. Filtering also can be fast, only the columns included in the filter selection have to be fully read and only the data in the filtered rows needs to be read from the remaining columns. Grouped aggregations likewise only need to read the grouping variables and the variables aggregated.</p>
<p>Once a particular vector is fully materialized the speed for all subsequent operations should be identical to a normal R vector.</p>
<p>This approach potentially also allows you to work with data that is larger than memory. As long as you are careful to avoid materializing the entire dataset at once it can be efficiently queried and subset.</p>
</div>
<div id="reading-delimited-files" class="section level1">
<h1 class="hasAnchor">
<a href="#reading-delimited-files" class="anchor"></a>Reading delimited files</h1>
<p>The following benchmarks all measure reading delimited files of various sizes and data types. Because vroom delays reading the benchmarks also do some manipulation of the data afterwards to try and provide a more realistic performance comparison.</p>
<p>Because the <code>read.delim</code> results are so much slower than the others they are excluded from the plots, but are retained in the tables.</p>
<div id="taxi-trip-dataset" class="section level2">
<h2 class="hasAnchor">
<a href="#taxi-trip-dataset" class="anchor"></a>Taxi Trip Dataset</h2>
<p>This real world dataset is from Freedom of Information Law (FOIL) Taxi Trip Data from the NYC Taxi and Limousine Commission 2013, originally posted at <a href="http://chriswhong.com/open-data/foil_nyc_taxi/" class="uri">http://chriswhong.com/open-data/foil_nyc_taxi/</a>. It is also hosted on <a href="https://archive.org/details/nycTaxiTripData2013">archive.org</a>.</p>
<p>The first table trip_fare_1.csv was converted to tsv and saved as trip_fare_1.tsv, It is 1.55G in size.</p>
<pre><code>#&gt; Observations: 14,776,615
#&gt; Variables: 11
#&gt; $ medallion       &lt;chr&gt; "89D227B655E5C82AECF13C3F540D4CF4", "0BD7C8F5B...
#&gt; $ hack_license    &lt;chr&gt; "BA96DE419E711691B9445D6A6307C170", "9FD8F69F0...
#&gt; $ vendor_id       &lt;chr&gt; "CMT", "CMT", "CMT", "CMT", "CMT", "CMT", "CMT...
#&gt; $ pickup_datetime &lt;chr&gt; "2013-01-01 15:11:48", "2013-01-06 00:18:35", ...
#&gt; $ payment_type    &lt;chr&gt; "CSH", "CSH", "CSH", "CSH", "CSH", "CSH", "CSH...
#&gt; $ fare_amount     &lt;dbl&gt; 6.5, 6.0, 5.5, 5.0, 9.5, 9.5, 6.0, 34.0, 5.5, ...
#&gt; $ surcharge       &lt;dbl&gt; 0.0, 0.5, 1.0, 0.5, 0.5, 0.0, 0.0, 0.0, 1.0, 0...
#&gt; $ mta_tax         &lt;dbl&gt; 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0...
#&gt; $ tip_amount      &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0...
#&gt; $ tolls_amount    &lt;dbl&gt; 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 4.8, 0.0, 0...
#&gt; $ total_amount    &lt;dbl&gt; 7.0, 7.0, 7.0, 6.0, 10.5, 10.0, 6.5, 39.3, 7.0...</code></pre>
<div id="taxi-benchmarks" class="section level3">
<h3 class="hasAnchor">
<a href="#taxi-benchmarks" class="anchor"></a>Taxi Benchmarks</h3>
<p>The code used to run the taxi benchmarks is in <a href="https://github.com/r-lib/vroom/blob/master/inst/bench/taxi-benchmark.R">bench/taxi-benchmark.R</a>.</p>
<p>The benchmarks labeled <code>vroom_base</code> uses <code>vroom</code> with base functions for manipulation. <code>vroom_dplyr</code> uses <code>vroom</code> to read the file and dplyr functions to manipulate. <code>data.table</code> uses <code>fread()</code> to read the file and <code>data.table</code> functions to manipulate and <code>readr</code> uses <code>readr</code> to read the file and <code>dplyr</code> to manipulate. By default vroom only uses Altrep for character vectors, the benchmarks labeled <code>vroom (full altrep)</code> instead use Altrep vectors for all supported types.</p>
<p>The following operations are performed.</p>
<ul>
<li>The data is read</li>
<li>
<code><a href="https://www.rdocumentation.org/packages/base/topics/print">print()</a></code> - <em>N.B. read.delim uses <code><a href="https://www.rdocumentation.org/packages/base/topics/print">print(head(x, 10))</a></code> because printing the whole dataset takes &gt; 10 minutes</em>
</li>
<li><code><a href="https://www.rdocumentation.org/packages/utils/topics/head">head()</a></code></li>
<li><code><a href="https://www.rdocumentation.org/packages/utils/topics/head">tail()</a></code></li>
<li>Sampling 100 random rows</li>
<li>Filtering for “UNK” payment, this is 6434 rows (0.0435% of total).</li>
<li>Aggregation of mean fare amount per payment type.</li>
</ul>
<img src="benchmarks_files/figure-html/unnamed-chunk-2-1.png" width="960"><table class="table">
<thead><tr>
<th style="text-align:right;">
package
</th>
<th style="text-align:right;">
read
</th>
<th style="text-align:right;">
print
</th>
<th style="text-align:right;">
head
</th>
<th style="text-align:right;">
tail
</th>
<th style="text-align:right;">
sample
</th>
<th style="text-align:right;">
filter
</th>
<th style="text-align:right;">
aggregate
</th>
<th style="text-align:right;">
total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
read.delim
</td>
<td style="text-align:right;">
1m 21.5s
</td>
<td style="text-align:right;">
6ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
315ms
</td>
<td style="text-align:right;">
764ms
</td>
<td style="text-align:right;">
1m 22.6s
</td>
</tr>
<tr>
<td style="text-align:right;">
readr
</td>
<td style="text-align:right;">
33.1s
</td>
<td style="text-align:right;">
90ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
202ms
</td>
<td style="text-align:right;">
825ms
</td>
<td style="text-align:right;">
34.2s
</td>
</tr>
<tr>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
15.7s
</td>
<td style="text-align:right;">
13ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
129ms
</td>
<td style="text-align:right;">
394ms
</td>
<td style="text-align:right;">
16.3s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom base
</td>
<td style="text-align:right;">
3.6s
</td>
<td style="text-align:right;">
93ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1.4s
</td>
<td style="text-align:right;">
7.3s
</td>
<td style="text-align:right;">
12.4s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom (full altrep) base
</td>
<td style="text-align:right;">
1.8s
</td>
<td style="text-align:right;">
133ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1.4s
</td>
<td style="text-align:right;">
7.5s
</td>
<td style="text-align:right;">
10.9s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom dplyr
</td>
<td style="text-align:right;">
3.6s
</td>
<td style="text-align:right;">
86ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
1.4s
</td>
<td style="text-align:right;">
1.9s
</td>
<td style="text-align:right;">
7s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom (full altrep) dplyr
</td>
<td style="text-align:right;">
1.7s
</td>
<td style="text-align:right;">
89ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1.7s
</td>
<td style="text-align:right;">
1.3s
</td>
<td style="text-align:right;">
1.9s
</td>
<td style="text-align:right;">
6.7s
</td>
</tr>
</tbody>
</table>
<p>(<em>N.B. Rcpp used in the dplyr implementation fully materializes all the Altrep numeric vectors when using <code><a href="https://www.rdocumentation.org/packages/stats/topics/filter">filter()</a></code> or <code>sample_n()</code>, which is why the first of these cases have additional overhead when using full Altrep.</em>).</p>
</div>
</div>
<div id="all-numeric-data" class="section level2">
<h2 class="hasAnchor">
<a href="#all-numeric-data" class="anchor"></a>All numeric data</h2>
<p>The code used to run the all numeric benchmarks is in <a href="https://github.com/r-lib/vroom/blob/master/inst/bench/all_numeric-benchmark.R">bench/all_numeric-benchmark.R</a>.</p>
<p>All numeric data is really a worst case scenario for vroom. The index takes about as much memory as the parsed data. Also because parsing doubles can be done quickly in parallel and text representations of doubles are only ~25 characters at most there isn’t a great deal of savings for delayed parsing.</p>
<p>For these reasons (and because the data.table implementation is very fast) vroom is a bit slower than fread for pure numeric data.</p>
<p>However the vroom is multi-threaded and therefore is quicker than readr and read.delim.</p>
<img src="benchmarks_files/figure-html/unnamed-chunk-3-1.png" width="960"><table class="table">
<thead><tr>
<th style="text-align:right;">
package
</th>
<th style="text-align:right;">
read
</th>
<th style="text-align:right;">
print
</th>
<th style="text-align:right;">
head
</th>
<th style="text-align:right;">
tail
</th>
<th style="text-align:right;">
sample
</th>
<th style="text-align:right;">
filter
</th>
<th style="text-align:right;">
aggregate
</th>
<th style="text-align:right;">
total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
read.delim
</td>
<td style="text-align:right;">
1m 57.6s
</td>
<td style="text-align:right;">
8ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
7s
</td>
<td style="text-align:right;">
54ms
</td>
<td style="text-align:right;">
2m 4.7s
</td>
</tr>
<tr>
<td style="text-align:right;">
readr
</td>
<td style="text-align:right;">
5.2s
</td>
<td style="text-align:right;">
103ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
12ms
</td>
<td style="text-align:right;">
43ms
</td>
<td style="text-align:right;">
5.4s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom base
</td>
<td style="text-align:right;">
1.6s
</td>
<td style="text-align:right;">
109ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
73ms
</td>
<td style="text-align:right;">
67ms
</td>
<td style="text-align:right;">
1.9s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom (full altrep) dplyr
</td>
<td style="text-align:right;">
391ms
</td>
<td style="text-align:right;">
105ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1.1s
</td>
<td style="text-align:right;">
64ms
</td>
<td style="text-align:right;">
41ms
</td>
<td style="text-align:right;">
1.7s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom dplyr
</td>
<td style="text-align:right;">
1.5s
</td>
<td style="text-align:right;">
108ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
12ms
</td>
<td style="text-align:right;">
37ms
</td>
<td style="text-align:right;">
1.7s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom (full altrep) base
</td>
<td style="text-align:right;">
504ms
</td>
<td style="text-align:right;">
152ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
60ms
</td>
<td style="text-align:right;">
220ms
</td>
<td style="text-align:right;">
937ms
</td>
</tr>
<tr>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
467ms
</td>
<td style="text-align:right;">
14ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
5ms
</td>
<td style="text-align:right;">
54ms
</td>
<td style="text-align:right;">
541ms
</td>
</tr>
</tbody>
</table>
</div>
<div id="all-character-data" class="section level2">
<h2 class="hasAnchor">
<a href="#all-character-data" class="anchor"></a>All character data</h2>
<p>The code used to run the all character benchmarks is in <a href="https://github.com/r-lib/vroom/blob/master/inst/bench/all_character-benchmark.R">bench/all_character-benchmark.R</a>.</p>
<p>All character data is a best case scenario for vroom, as none of the data needs to be read initially.</p>
<img src="benchmarks_files/figure-html/unnamed-chunk-4-1.png" width="960"><table class="table">
<thead><tr>
<th style="text-align:right;">
package
</th>
<th style="text-align:right;">
read
</th>
<th style="text-align:right;">
print
</th>
<th style="text-align:right;">
head
</th>
<th style="text-align:right;">
tail
</th>
<th style="text-align:right;">
sample
</th>
<th style="text-align:right;">
filter
</th>
<th style="text-align:right;">
aggregate
</th>
<th style="text-align:right;">
total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
read.delim
</td>
<td style="text-align:right;">
1m 38.6s
</td>
<td style="text-align:right;">
9ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
21ms
</td>
<td style="text-align:right;">
330ms
</td>
<td style="text-align:right;">
1m 39s
</td>
</tr>
<tr>
<td style="text-align:right;">
readr
</td>
<td style="text-align:right;">
58.6s
</td>
<td style="text-align:right;">
111ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
14ms
</td>
<td style="text-align:right;">
359ms
</td>
<td style="text-align:right;">
59.1s
</td>
</tr>
<tr>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
38.5s
</td>
<td style="text-align:right;">
17ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
16ms
</td>
<td style="text-align:right;">
226ms
</td>
<td style="text-align:right;">
38.8s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom (full altrep) base
</td>
<td style="text-align:right;">
516ms
</td>
<td style="text-align:right;">
148ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
159ms
</td>
<td style="text-align:right;">
1.9s
</td>
<td style="text-align:right;">
2.7s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom base
</td>
<td style="text-align:right;">
493ms
</td>
<td style="text-align:right;">
137ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
168ms
</td>
<td style="text-align:right;">
1.9s
</td>
<td style="text-align:right;">
2.7s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom dplyr
</td>
<td style="text-align:right;">
391ms
</td>
<td style="text-align:right;">
166ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
180ms
</td>
<td style="text-align:right;">
1.2s
</td>
<td style="text-align:right;">
1.9s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom (full altrep) dplyr
</td>
<td style="text-align:right;">
381ms
</td>
<td style="text-align:right;">
89ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
137ms
</td>
<td style="text-align:right;">
1s
</td>
<td style="text-align:right;">
1.6s
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="writing-delimited-files" class="section level1">
<h1 class="hasAnchor">
<a href="#writing-delimited-files" class="anchor"></a>Writing delimited files</h1>
<p>The code used to run the taxi writing benchmarks is at <a href="https://github.com/r-lib/vroom/blob/master/inst/bench/taxi_writing-benchmark.R">bench/taxi_writing-benchmark.R</a>.</p>
<p>The benchmarks write out the taxi trip dataset in three different ways.</p>
<ul>
<li>An uncompressed file</li>
<li>A gzip compressed file using <code><a href="https://www.rdocumentation.org/packages/base/topics/connections">gzfile()</a></code> <em>(readr and vroom do this automatically for files ending in <code>.gz</code>)</em>
</li>
<li>A multithreaded gzip compressed file using a <code><a href="https://www.rdocumentation.org/packages/base/topics/connections">pipe()</a></code> connection to <a href="https://zlib.net/pigz/">pigz</a>
</li>
</ul>
<p><em>Note the current CRAN version of data.table (1.12.2) does not support writing to compressed files</em></p>
<img src="benchmarks_files/figure-html/unnamed-chunk-5-1.png" width="960"><table class="table">
<thead><tr>
<th style="text-align:right;">
package
</th>
<th style="text-align:right;">
uncompressed
</th>
<th style="text-align:right;">
gzip
</th>
<th style="text-align:right;">
multithreaded gzip
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
4.3s
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
write.delim
</td>
<td style="text-align:right;">
1m 31.6s
</td>
<td style="text-align:right;">
3m 20.5s
</td>
<td style="text-align:right;">
1m 29.1s
</td>
</tr>
<tr>
<td style="text-align:right;">
readr
</td>
<td style="text-align:right;">
1m 6.8s
</td>
<td style="text-align:right;">
2m 16.6s
</td>
<td style="text-align:right;">
1m 4.7s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
7.4s
</td>
<td style="text-align:right;">
1m 18.3s
</td>
<td style="text-align:right;">
17.5s
</td>
</tr>
</tbody>
</table>
<div id="session-and-package-information" class="section level2">
<h2 class="hasAnchor">
<a href="#session-and-package-information" class="anchor"></a>Session and package information</h2>
<p>The development version of dplyr was used in the benchmarks, as contains a <a href="https://github.com/tidyverse/dplyr/pull/4314">fix</a> for a performance issue with Altrep objects.</p>
<table class="table">
<thead><tr class="header">
<th align="left">package</th>
<th align="left">version</th>
<th align="left">date</th>
<th align="left">source</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">base</td>
<td align="left">3.5.3</td>
<td align="left">2019-03-13</td>
<td align="left">local</td>
</tr>
<tr class="even">
<td align="left">data.table</td>
<td align="left">1.12.2</td>
<td align="left">2019-04-07</td>
<td align="left">CRAN (R 3.5.2)</td>
</tr>
<tr class="odd">
<td align="left">dplyr</td>
<td align="left">0.8.0.9012</td>
<td align="left">2019-04-29</td>
<td align="left">local</td>
</tr>
<tr class="even">
<td align="left">readr</td>
<td align="left">1.3.1</td>
<td align="left">2018-12-21</td>
<td align="left">CRAN (R 3.5.0)</td>
</tr>
<tr class="odd">
<td align="left">vroom</td>
<td align="left">0.0.0.9000</td>
<td align="left">2019-04-30</td>
<td align="left">local</td>
</tr>
</tbody>
</table>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#how-it-works">How it works</a></li>
      <li>
<a href="#reading-delimited-files">Reading delimited files</a><ul class="nav nav-pills nav-stacked">
<li><a href="#taxi-trip-dataset">Taxi Trip Dataset</a></li>
      <li><a href="#all-numeric-data">All numeric data</a></li>
      <li><a href="#all-character-data">All character data</a></li>
      </ul>
</li>
      <li>
<a href="#writing-delimited-files">Writing delimited files</a><ul class="nav nav-pills nav-stacked">
<li><a href="#session-and-package-information">Session and package information</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://jimhester.com">Jim Hester</a>, <a href="http://hadley.nz">Hadley Wickham</a>, <a href="https://www.rstudio.com"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" height="24"></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
